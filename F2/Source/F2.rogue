#================================================================================
# Froley.rogue
# April 17, 2021
#================================================================================

$requireRogue "1.8.1"

$include "Organizer.rogue"
$include "Parser.rogue"
$include "Program.rogue"
$include "GenerateRogue.rogue"
$include "Tokenizer.rogue"
uses F2

uses Utility/CommandLineParser

try
  Froley( System.command_line_arguments )
catch (error:Error)
  Console.error.println error
  System.exit 1
endTry

class Froley
  METHODS
    method init( args:String[] )
      local command = CommandLineParser().
      [
        # option( "--flag", &alias="-f" )
        # option( "--setting=",  &alias="-s" )
      ].parse( System.command_line_arguments )

      #trace command
      # has //options and possibly //args
      #println( Tokenizer( File("Examples/LineCount.f2") ).tokenize )
      local nodes = Parser().[open(File("Examples/HelloWorld.f2"))].parse("program")
      local program = Program( nodes )
      println program
      program.generate_rogue( "Build/HelloWorld" )
      #println( Parser().[open(File("Examples/LineCount.f2"))].parse("program") )
endClass
